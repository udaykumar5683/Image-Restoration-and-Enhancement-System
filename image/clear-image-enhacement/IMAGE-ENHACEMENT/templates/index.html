<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Clear Image Enhancement</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        :root { --speed-top: 90s; --speed-bottom: 150s; --glass-bg: rgba(255,255,255,0.08); --glass-border: rgba(255,255,255,0.18); }
        html { scroll-behavior: smooth; }
        body { font-family: Inter, ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif; background: linear-gradient(180deg, #0f172a 0%, #111827 100%); color: #e5e7eb; }
        .loader { border: 8px solid #e5e7eb; border-top: 8px solid #3b82f6; border-radius: 50%; width: 60px; height: 60px; animation: spin 2s linear infinite; position: absolute; top: 50%; left: 50%; margin-left: -30px; margin-top: -30px; z-index: 30; }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
        .primary-bg { position: fixed; inset: 0; pointer-events: none; z-index: 0; background-position: center; background-repeat: no-repeat; background-size: cover; filter: saturate(0.9) blur(8px); opacity: 0.22; }
        .bg-layer { position: fixed; inset: 0; pointer-events: none; overflow: hidden; z-index: 1; opacity: 0; transition: opacity 360ms ease; content-visibility: auto; }
        .bg-layer.ready { opacity: 1; }
        .bg-strip { position: absolute; left: 0; right: 0; display: flex; align-items: center; gap: 2rem; contain: layout paint style; transition: transform 300ms ease, opacity 300ms ease; backface-visibility: hidden; transform: translateZ(0); }
        .scroll-track { display: inline-flex; gap: 2rem; will-change: transform; backface-visibility: hidden; }
        .dir-lr { will-change: transform; animation: swayY 16s ease-in-out infinite alternate; }
        .dir-rl { will-change: transform; animation: swayY 12s ease-in-out infinite alternate; }
        @keyframes swayY { 0% { transform: translate3d(0,0,0); } 100% { transform: translate3d(0,6px,0); } }
        .bg-item { height: clamp(56px, 10vw, 96px); width: auto; object-fit: contain; filter: saturate(0.9); }
        .dir-lr .scroll-track { animation: loop-right var(--speed) linear infinite; }
        .dir-rl .scroll-track { animation: loop-left var(--speed) linear infinite; }
        @keyframes loop-left { 0% { transform: translate3d(0,0,0); } 100% { transform: translate3d(-50%,0,0); } }
        @keyframes loop-right { 0% { transform: translate3d(-50%,0,0); } 100% { transform: translate3d(0,0,0); } }
        @media (prefers-reduced-motion: reduce) { .dir-lr, .dir-rl { animation: none; } .dir-lr .scroll-track, .dir-rl .scroll-track { animation-duration: calc(var(--speed) * 2); } }
        @supports not (backdrop-filter: blur(1px)) { .page-glass { background: rgba(255,255,255,0.06); } }
        .container { max-width: 1200px; margin: 0 auto; padding: 0 24px; }
        .hero { padding-top: 120px; padding-bottom: 64px; text-align: center; position: relative; z-index: 10; }
        .hero h1 { font-size: clamp(32px, 5vw, 64px); font-weight: 800; letter-spacing: -0.02em; color: #f9fafb; opacity: 0; transform: translateY(12px); animation: fadeUp 700ms ease 140ms forwards; }
        .hero p { margin-top: 16px; font-size: clamp(16px, 2.2vw, 22px); color: #cbd5e1; opacity: 0; transform: translateY(12px); animation: fadeUp 700ms ease 280ms forwards; }
        .hero-actions { margin-top: 28px; display: flex; justify-content: center; gap: 16px; opacity: 0; transform: translateY(12px); animation: fadeUp 700ms ease 420ms forwards; }
        .btn { display: inline-flex; align-items: center; gap: 8px; border-radius: 12px; padding: 14px 22px; font-weight: 600; text-decoration: none; transition: transform 200ms ease, box-shadow 200ms ease, background 200ms ease; }
        .btn-primary { background: linear-gradient(135deg, #4f46e5, #0ea5e9); color: #fff; box-shadow: 0 10px 24px rgba(79,70,229,0.35); }
        .btn-primary:hover { transform: translateY(-2px); box-shadow: 0 16px 36px rgba(14,165,233,0.35); }
        .btn-link { color: #93c5fd; }
        .scroll-indicator { margin-top: 36px; display: inline-block; width: 28px; height: 28px; border-radius: 9999px; border: 2px solid rgba(255,255,255,0.25); position: relative; }
        .scroll-indicator::after { content: ""; position: absolute; left: 50%; top: 6px; width: 2px; height: 8px; background: #93c5fd; transform: translateX(-50%); animation: pulse 1200ms ease infinite; }
        @keyframes pulse { 0% { opacity: 0; transform: translate(-50%, -2px); } 50% { opacity: 1; transform: translate(-50%, 2px); } 100% { opacity: 0; transform: translate(-50%, 6px); } }
        @keyframes fadeUp { to { opacity: 1; transform: translateY(0); } }
        .compare { position: relative; max-width: 960px; margin: 48px auto; border-radius: 16px; overflow: hidden; box-shadow: 0 24px 64px rgba(0,0,0,0.35); aspect-ratio: 16/9; }
        .compare .label { position: absolute; top: 16px; padding: 8px 12px; border-radius: 9999px; font-weight: 600; font-size: 14px; backdrop-filter: blur(8px); background: var(--glass-bg); border: 1px solid var(--glass-border); }
        .label-before { left: 16px; }
        .label-after { right: 16px; }
        .compare img { display: block; width: 100%; height: 100%; object-fit: contain; user-select: none; background: #0b1220; border: 1px solid var(--glass-border); border-radius: 12px; }
        .compare .after-wrap { position: absolute; inset: 0; width: 50%; overflow: hidden; transition: width 600ms ease; }
        .compare .handle { position: absolute; top: 0; bottom: 0; left: 50%; width: 24px; transform: translateX(-50%); cursor: ew-resize; display: flex; align-items: center; justify-content: center; transition: left 600ms ease; }
        .compare .handle-line { width: 2px; height: 80%; background: #93c5fd; box-shadow: 0 0 0 2px rgba(147,197,253,0.3); border-radius: 2px; }
        .grid { display: grid; grid-template-columns: repeat(4, minmax(0,1fr)); gap: 20px; }
        @media (max-width: 1024px) { .grid { grid-template-columns: repeat(2, minmax(0,1fr)); } }
        @media (max-width: 560px) { .grid { grid-template-columns: repeat(1, minmax(0,1fr)); } }
        .card { padding: 22px; border-radius: 16px; background: var(--glass-bg); border: 1px solid var(--glass-border); backdrop-filter: blur(12px); box-shadow: 0 12px 32px rgba(0,0,0,0.25); transition: transform 220ms ease, box-shadow 220ms ease; }
        .card:hover { transform: translateY(-4px); box-shadow: 0 18px 48px rgba(0,0,0,0.35); }
        .process { display: grid; grid-template-columns: repeat(3, minmax(0,1fr)); gap: 20px; align-items: center; }
        @media (max-width: 768px) { .process { grid-template-columns: 1fr; } }
        .step { text-align: center; padding: 22px; border-radius: 16px; background: var(--glass-bg); border: 1px solid var(--glass-border); backdrop-filter: blur(12px); }
        .gallery { margin-top: 28px; display: grid; grid-template-columns: repeat(3, minmax(0,1fr)); gap: 16px; }
        @media (max-width: 900px) { .gallery { grid-template-columns: repeat(2, minmax(0,1fr)); } }
        @media (max-width: 560px) { .gallery { grid-template-columns: 1fr; } }
        .thumb { position: relative; border-radius: 12px; overflow: hidden; box-shadow: 0 12px 24px rgba(0,0,0,0.3); }
        .thumb img { width: 100%; display: block; }
        .thumb .after { position: absolute; inset: 0; width: 0; overflow: hidden; transition: width 260ms ease; }
        .thumb:hover .after { width: 100%; }
        .pair-card { display: grid; grid-template-columns: 1fr 1fr; gap: 0; border-radius: 16px; overflow: hidden; box-shadow: 0 18px 48px rgba(0,0,0,0.35); background: #0b1220; aspect-ratio: 16/9; }
        .pair-card figure { margin: 0; position: relative; height: 100%; padding: 8px; }
        .pair-card img { width: 100%; height: 100%; object-fit: contain; background: #0b1220; border: 1px solid var(--glass-border); border-radius: 12px; }
        .pair-card figcaption { position: absolute; top: 12px; left: 12px; padding: 6px 10px; border-radius: 9999px; backdrop-filter: blur(8px); background: var(--glass-bg); border: 1px solid var(--glass-border); font-weight: 700; font-size: 12px; color: #fff; }
        .skeleton { position: relative; background: rgba(255,255,255,0.06); }
        .skeleton::after { content: ""; position: absolute; inset: 0; background: linear-gradient(90deg, rgba(255,255,255,0.02) 0%, rgba(255,255,255,0.08) 50%, rgba(255,255,255,0.02) 100%); animation: shimmer 1200ms linear infinite; }
        @keyframes shimmer { 0% { transform: translateX(-100%); } 100% { transform: translateX(100%); } }
        footer { margin-top: 60px; padding: 32px 0; border-top: 1px solid rgba(255,255,255,0.08); }
        .footer-links, .footer-social { display: flex; gap: 16px; justify-content: center; flex-wrap: wrap; }
    </style>
</head>
<body class="min-h-screen bg-gray-50">
    <div class="primary-bg"></div>
    <div id="bg-layer" class="bg-layer"></div>
    <div class="page-glass" style="position: fixed; inset: 0; pointer-events: none; z-index: 5; backdrop-filter: saturate(1.2) blur(10px); -webkit-backdrop-filter: saturate(1.2) blur(10px); background: radial-gradient(800px 400px at 20% 10%, rgba(255,255,255,0.15), rgba(255,255,255,0.04) 40%), linear-gradient(180deg, rgba(79,70,229,0.06), rgba(14,165,233,0.06)); opacity: 0.6;"></div>

    <section class="relative z-10">
        <div class="container hero">
            <h1>Enhance Your Images </h1>
            <p>Upscale, restore details, fix exposure, sharpen faces ‚Äî in one click.</p>
            <div class="hero-actions">
                <a id="cta-start" href="/get-started" class="btn btn-primary" aria-label="Get started">GET Started</a>
            </div>
            <a href="#compare" class="scroll-indicator" aria-label="Scroll down"></a>
        </div>
    </section>

    <section id="compare" class="relative z-10">
        <div class="container">
            <div class="compare" aria-label="Before and After slider">
                <span class="label label-before">Before</span>
                <span class="label label-after">After</span>
                <img id="beforeImg" src="" alt="After comparison">
                <div id="afterWrap" class="after-wrap">
                    <img id="afterImg" src="" alt="Before comparison">
                </div>
                <div id="handle" class="handle"><div class="handle-line"></div></div>
            </div>
            <div style="margin-top:32px;">
                <h2 style="font-size:24px;font-weight:800;color:#fff;text-align:center;">Side-by-side Comparisons</h2>
                <div id="pairsGrid" class="gallery" aria-live="polite"></div>
            </div>
        </div>
    </section>

    <section id="features" class="relative z-10">
        <div class="container" style="padding-bottom:32px;">
            <div class="grid">
                <div class="card"><div style="font-size:28px">‚ú®</div><h3 style="margin-top:8px;font-size:18px;font-weight:700;color:#fff">AI Detail Enhancement</h3><p style="margin-top:6px;color:#cbd5e1">Recover textures and fine details intelligently.</p></div>
                <div class="card"><div style="font-size:28px">üîç</div><h3 style="margin-top:8px;font-size:18px;font-weight:700;color:#fff">Sharpness & Clarity Boost</h3><p style="margin-top:6px;color:#cbd5e1">Sharpen faces and edges while keeping natural look.</p></div>
                <div class="card"><div style="font-size:28px">üåà</div><h3 style="margin-top:8px;font-size:18px;font-weight:700;color:#fff">Exposure & Color Correction</h3><p style="margin-top:6px;color:#cbd5e1">Fix lighting issues and balance colors automatically.</p></div>
                <div class="card"><div style="font-size:28px">üìà</div><h3 style="margin-top:8px;font-size:18px;font-weight:700;color:#fff">Noise Removal & Upscaling</h3><p style="margin-top:6px;color:#cbd5e1">Clean noise and upscale with minimal artifacts.</p></div>
            </div>
        </div>
    </section>

    <section id="process" class="relative z-10">
        <div class="container" style="padding-bottom:32px;">
            <div class="process">
                <div class="step"><div style="font-size:28px">üì§</div><h4 style="margin-top:8px;font-size:18px;font-weight:700;color:#fff">Upload Image</h4><p style="margin-top:6px;color:#cbd5e1">Pick a photo from your device.</p></div>
                <div class="step"><div style="font-size:28px">‚öôÔ∏è</div><h4 style="margin-top:8px;font-size:18px;font-weight:700;color:#fff">AI Enhances Automatically</h4><p style="margin-top:6px;color:#cbd5e1">Smart pipeline improves quality.</p></div>
                <div class="step"><div style="font-size:28px">üì•</div><h4 style="margin-top:8px;font-size:18px;font-weight:700;color:#fff">Download Results</h4><p style="margin-top:6px;color:#cbd5e1">Save your enhanced image.</p></div>
            </div>
        </div>
    </section>

    <section id="gallery" class="relative z-10">
        <div class="container" style="padding-bottom:32px;">
            <h2 style="font-size:28px;font-weight:800;color:#fff;text-align:center;">Sample Gallery</h2>
            <div id="galleryGrid" class="gallery"></div>
        </div>
    </section>

    <footer class="relative z-10">
        <div class="container">
            <div class="footer-links" aria-label="Footer navigation">
                <a href="#" style="color:#cbd5e1">About</a>
                <a href="#" style="color:#cbd5e1">Contact</a>
                <a href="#" style="color:#cbd5e1">Privacy</a>
                <a href="#" style="color:#cbd5e1">Terms</a>
            </div>
            <div class="footer-social" style="margin-top:12px;">
                <a href="#" aria-label="Twitter" style="color:#93c5fd">ùïè</a>
                <a href="#" aria-label="GitHub" style="color:#93c5fd">GH</a>
                <a href="#" aria-label="LinkedIn" style="color:#93c5fd">in</a>
            </div>
            
        </div>
    </footer>

    

    <script>
        document.addEventListener('DOMContentLoaded', () => { document.body.style.opacity = '1'; });
        const cta = document.getElementById('cta-start');
        cta.addEventListener('click', (e) => {
            e.preventDefault();
            const href = cta.getAttribute('href');
            document.body.style.transition = 'opacity 220ms ease';
            document.body.style.opacity = '0';
            setTimeout(() => { window.location.assign(href); }, 220);
        });
        
        const samplePairs = {{ sample_pairs|tojson }};
        const pairsAll = {{ pairs_all|tojson }};
        const beforeList = {{ before_images|tojson }};
        const afterList = {{ after_images|tojson }};
        const defaultPair = samplePairs[0] || null;
        const customPair = { name: '789_pair', before: '/examples/before/789before.png', after: '/examples/after/789after.png' };
        const beforeImg = document.getElementById('beforeImg');
        const afterImg = document.getElementById('afterImg');
        const afterWrap = document.getElementById('afterWrap');
        const handle = document.getElementById('handle');
        let pos = 0.5;
        let dragging = false;
        const setPos = p => { pos = Math.max(0.05, Math.min(0.95, p)); afterWrap.style.width = (pos * 100) + '%'; handle.style.left = (pos * 100) + '%'; };
        let autoSlideTimer = null; let resumeTimer = null; const autoTargets = [0.15, 0.85]; let autoIndex = 0;
        const startAutoSlide = () => { if (autoSlideTimer) return; autoSlideTimer = setInterval(() => { setPos(autoTargets[autoIndex]); autoIndex = (autoIndex + 1) % autoTargets.length; }, 2000); };
        const stopAutoSlide = () => { if (autoSlideTimer) { clearInterval(autoSlideTimer); autoSlideTimer = null; } };
        const startDrag = e => { dragging = true; document.body.style.cursor = 'ew-resize'; stopAutoSlide(); if (resumeTimer) { clearTimeout(resumeTimer); resumeTimer = null; } };
        const endDrag = () => { dragging = false; document.body.style.cursor = ''; resumeTimer = setTimeout(startAutoSlide, 1500); };
        const move = e => {
            if (!dragging) return;
            const rect = document.querySelector('.compare').getBoundingClientRect();
            const x = (e.touches ? e.touches[0].clientX : e.clientX) - rect.left;
            setPos(x / rect.width);
        };
        handle.addEventListener('mousedown', startDrag);
        handle.addEventListener('touchstart', startDrag, { passive: true });
        window.addEventListener('mouseup', endDrag);
        window.addEventListener('touchend', endDrag, { passive: true });
        window.addEventListener('mousemove', move);
        window.addEventListener('touchmove', move, { passive: true });
        const applyPair = pair => {
            if (!pair) return;
            beforeImg.src = pair.before;
            beforeImg.alt = 'Before comparison';
            afterImg.src = pair.after;
            afterImg.alt = 'After comparison';
            setPos(0.5);
        };
        applyPair(customPair || defaultPair);
        startAutoSlide();
        
        const backgroundImages = {{ background_images|tojson }};
        let io;
        const buildTrack = (track, images) => {
            const sources = images.concat(images);
            sources.forEach((src, i) => {
                const img = new Image();
                img.dataset.src = src;
                img.alt = '';
                img.setAttribute('aria-hidden', 'true');
                img.loading = 'lazy';
                img.decoding = 'async';
                img.fetchPriority = 'low';
                img.draggable = false;
                img.className = 'bg-item';
                img.style.opacity = i % 3 === 0 ? '0.6' : i % 3 === 1 ? '0.45' : '0.5';
                track.appendChild(img);
                if (io) io.observe(img);
            });
        };
        const preload = src => new Promise(r => { const i = new Image(); i.onload = () => r(); i.onerror = () => r(); i.src = src; });
        io = new IntersectionObserver((entries, obs) => { entries.forEach(e => { const t = e.target; if (e.isIntersecting && t.dataset && t.dataset.src && !t.src) { t.src = t.dataset.src; obs.unobserve(t); } }); }, { root: null, rootMargin: '200px', threshold: 0.01 });
        const buildLayer = (container, images, y, height, dir, speed, index) => {
            const strip = document.createElement('div');
            strip.className = 'bg-strip ' + (dir==='lr' ? 'dir-lr' : 'dir-rl');
            strip.style.top = y + 'px';
            strip.style.height = height + 'px';
            strip.style.opacity = dir==='lr' ? '0.72' : '0.48';
            const track = document.createElement('div');
            track.className = 'scroll-track';
            track.style.setProperty('--speed', speed + 's');
            track.style.animationDuration = speed + 's';
            track.style.animationTimingFunction = 'linear';
            if (index === 0 || index === 2) { track.style.animationDuration = (speed + 20) + 's'; track.style.animationTimingFunction = 'ease-in-out'; }
            track.style.animationDelay = '0s';
            strip.style.transform = 'translateZ(0)';
            track.style.backfaceVisibility = 'hidden';
            track.style.willChange = 'transform';
            buildTrack(track, images);
            strip.appendChild(track);
            container.appendChild(strip);
        };
        const computeLayers = () => {
            const container = document.getElementById('bg-layer');
            if (!container) return;
            container.innerHTML = '';
            const viewportH = window.innerHeight;
            const rowH = Math.max(56, Math.min(window.innerWidth * 0.10, 96));
            const gap = 10;
            const step = rowH + gap;
            const count = Math.ceil((viewportH + gap) / step);
            const shuffled = backgroundImages.slice().sort(() => Math.random() - 0.5);
            const base = 80;
            const delta = 8;
            for (let i = 0; i < count; i++) {
                const dir = (i % 2 === 0) ? 'lr' : 'rl';
                const speed = base + (i * delta);
                const offset = i % shuffled.length;
                const layerImages = [];
                for (let k = 0; k < shuffled.length; k++) {
                    layerImages.push(shuffled[(offset + k) % shuffled.length]);
                }
                const y = i * step;
                buildLayer(container, layerImages, y, rowH, dir, speed, i);
            }
        };
        (async () => {
            await Promise.all(backgroundImages.map(preload));
            const primary = document.querySelector('.primary-bg');
            if (primary && backgroundImages.length) {
                const pick = backgroundImages[Math.floor(Math.random()*backgroundImages.length)];
                primary.style.backgroundImage = 'url(' + pick + ')';
            }
            computeLayers();
            document.getElementById('bg-layer')?.classList.add('ready');
            window.addEventListener('resize', computeLayers, { passive: true });
            (function() {
                const nav = document.querySelector('nav.site-nav');
                const links = nav ? nav.querySelectorAll('a') : [];
                const path = window.location.pathname;
                links.forEach(a => { if (a.getAttribute('href') === path) a.setAttribute('aria-current', 'page'); });
                let ticking = false;
                const onScroll = () => { const ty = Math.min(6, window.scrollY * 0.05); if (nav) nav.style.setProperty('--nav-ty', ty + 'px'); ticking = false; };
                window.addEventListener('scroll', () => { if (!ticking) { window.requestAnimationFrame(onScroll); ticking = true; } }, { passive: true });
            })();
            const grid = document.getElementById('galleryGrid');
            samplePairs.forEach(pair => {
                const wrap = document.createElement('div');
                wrap.className = 'thumb';
                const b = document.createElement('img');
                b.src = pair.before;
                b.alt = 'Sample before';
                const aWrap = document.createElement('div');
                aWrap.className = 'after';
                const a = document.createElement('img');
                a.src = pair.after;
                a.alt = 'Sample after';
                aWrap.appendChild(a);
                wrap.appendChild(b);
                wrap.appendChild(aWrap);
                grid.appendChild(wrap);
            });
            const pairsGrid = document.getElementById('pairsGrid');
            const makePairCard = (pair) => {
                const card = document.createElement('div');
                card.className = 'pair-card';
                const fig1 = document.createElement('figure');
                const img1 = document.createElement('img');
                img1.src = pair.before;
                img1.alt = 'Before: ' + pair.name;
                img1.loading = 'lazy';
                fig1.className = 'skeleton';
                img1.addEventListener('load', () => { fig1.classList.remove('skeleton'); });
                const cap1 = document.createElement('figcaption'); cap1.textContent = 'Before';
                fig1.appendChild(img1); fig1.appendChild(cap1);
                const fig2 = document.createElement('figure');
                const img2 = document.createElement('img');
                img2.src = pair.after;
                img2.alt = 'After: ' + pair.name;
                img2.loading = 'lazy';
                fig2.className = 'skeleton';
                img2.addEventListener('load', () => { fig2.classList.remove('skeleton'); });
                const cap2 = document.createElement('figcaption'); cap2.textContent = 'After';
                fig2.appendChild(img2); fig2.appendChild(cap2);
                card.appendChild(fig1); card.appendChild(fig2);
                return card;
            };
            if (pairsGrid) {
                const customEl = makePairCard(customPair);
                const imgs = customEl.querySelectorAll('img');
                if (imgs[0]) imgs[0].alt = 'Before comparison';
                if (imgs[1]) imgs[1].alt = 'After comparison';
                pairsGrid.prepend(customEl);
            }
            if (pairsAll.length === 0) {
                const msg = document.createElement('p');
                msg.textContent = 'No matching pairs found.';
                msg.style.color = '#cbd5e1';
                msg.style.textAlign = 'center';
                pairsGrid.appendChild(msg);
            } else {
                const frag = document.createDocumentFragment();
                pairsAll.forEach(p => frag.appendChild(makePairCard(p)));
                pairsGrid.appendChild(frag);
            }
        })();
        
    </script>
</body>
</html>
